suite: Test secret
templates:
  - secret.yaml
tests:
  - it: should match the snapshot (smtp on)
    set:
      mailgun.enabled: false
      smtp:
        enabled: true
        password: mysmtppasswd
    asserts:
      - matchSnapshot: {}

  - it: should match the snapshot (mailgun on)
    set:
      mailgun:
        enabled: true
        privateKey: "--- TEST PRIVATE KEY ---"
    asserts:
      - matchSnapshot: {}

  - it: should not exist (both off)
    asserts:
      - hasDocuments:
          count: 0
